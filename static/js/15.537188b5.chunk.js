(this.webpackJsonpinvoicy=this.webpackJsonpinvoicy||[]).push([[15],{1247:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(18),c=a(74),o=a.n(c),s=a(87),l=a(9),i=a(10),u=a(12),m=a(11),d=a(0),p=a.n(d),f=a(268),h=a(202),b=a(161),v=a(262),y=a(269),E=a(22),g=a(162),w=a.n(g),O=a(86),x=a(163),k=a.n(x),j=a(270),N=a.n(j),C=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).clientId=n.props.match.params.id,n.state={wallet:"",companyId:0,client:{},invoices:[],discount:0},n.fetchAccount(),n}return Object(i.a)(a,[{key:"fetchAccount",value:function(){var e=Object(s.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.n)();case 2:return e.next=4,Object(O.m)();case 4:return t=e.sent,this.setState({wallet:t}),e.next=8,Object(O.k)();case 8:(a=e.sent)>0?this.setState({companyId:a}):this.props.history.push("/");case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getInvoices",value:function(){var e=Object(s.a)(o.a.mark((function e(){var t=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.fetchAccount();case 3:return e.next=5,Object(O.g)(this.state.companyId,this.clientId);case 5:e.sent.forEach(function(){var e=Object(s.a)(o.a.mark((function e(a){var n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.l)(a);case 2:n=e.sent,c={id:a,data:n},t.setState({invoices:[].concat(Object(r.a)(t.state.invoices),[c])});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"getClientDetails",value:function(){var e=Object(s.a)(o.a.mark((function e(){var t,a,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.fetchAccount();case 3:return e.next=5,Object(O.i)(this.state.companyId,this.clientId);case 5:return t=e.sent,e.next=8,Object(O.k)(t.clientAddr);case 8:return a=e.sent,e.next=11,Object(O.j)(a);case 11:r=e.sent,c=Object(n.a)(Object(n.a)({},t),r),this.setState({client:c}),this.setState({discount:this.state.client.discount}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.log(e.t0);case 20:case"end":return e.stop()}}),e,this,[[0,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getClientDetails(),this.getInvoices()}},{key:"updateDiscount",value:function(){var e=Object(s.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.q)(this.state.companyId,this.clientId,t);case 2:e.sent?(this.dialog.showAlert("Success!"),this.setState({client:Object(n.a)(Object(n.a)({},this.state.client),{},{discount:t})})):this.dialog.showAlert("Something went wrong!");case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"blockClient",value:function(){var e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.p)(this.state.companyId,this.clientId);case 2:e.sent?(this.dialog.showAlert("Success!"),this.props.history.push({pathname:"/dashboard"})):this.dialog.showAlert("Something went wrong!");case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateWorkStatus",value:function(){var e=Object(s.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.r)(t);case 2:e.sent?(this.dialog.showAlert("Success!"),window.location.reload()):this.dialog.showAlert("Something went wrong!");case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"viewDetails",value:function(e){this.props.history.push({pathname:"/view-invoice/",state:{invoice:e}})}},{key:"render",value:function(){var e=this,t=[],a=[];return this.state.invoices.forEach((function(n){n.data.isSettled?a.push(p.a.createElement("tr",{className:"unread",key:n.id},p.a.createElement("td",null,p.a.createElement("img",{className:"rounded-circle",style:{width:"40px"},src:w.a,alt:"activity-user"})),p.a.createElement("td",null,p.a.createElement("h6",{className:"mb-1"},n.data.client.name),p.a.createElement("p",{className:"m-0"},n.data.client.email)),p.a.createElement("td",null,p.a.createElement("h6",{className:"text-muted"},p.a.createElement("i",{className:"fa fa-circle text-c-green f-10 m-r-15"}),n.data.invoiceDate)),p.a.createElement("td",null,p.a.createElement("h6",{className:"text-muted"},p.a.createElement("i",{className:"fa fa-circle text-c-red f-10 m-r-15"}),n.data.dueDate)),p.a.createElement("td",null,p.a.createElement("h6",{className:"text-muted"},O.s.utils.fromWei(n.data.payment.totalAmount)," ETH")),p.a.createElement("td",null,p.a.createElement("h6",{className:"text-muted"},"Work Status: \xa0",n.data.workCompleted&&p.a.createElement("span",{className:"text-success"},"Completed"),!n.data.workCompleted&&p.a.createElement("span",{className:"text-danger"},"Not Completed"))),p.a.createElement("td",null,p.a.createElement("button",{style:{border:0},onClick:function(){return e.viewDetails(n)},className:"label theme-bg text-white f-12"},"View Details"),p.a.createElement("button",{style:{border:0},onClick:function(){return e.updateWorkStatus(n.id)},className:"label theme-bg text-white f-12"},!n.data.workCompleted&&"Update Progress",n.data.workCompleted&&"Delete Progress")))):t.push(p.a.createElement("tr",{className:"unread",key:n.id},p.a.createElement("td",null,p.a.createElement("img",{className:"rounded-circle",style:{width:"40px"},src:w.a,alt:"activity-user"})),p.a.createElement("td",null,p.a.createElement("h6",{className:"mb-1"},n.data.client.name),p.a.createElement("p",{className:"m-0"},n.data.client.email)),p.a.createElement("td",null,p.a.createElement("h6",{className:"text-muted"},p.a.createElement("i",{className:"fa fa-circle text-c-green f-10 m-r-15"}),n.data.invoiceDate)),p.a.createElement("td",null,p.a.createElement("h6",{className:"text-muted"},p.a.createElement("i",{className:"fa fa-circle text-c-red f-10 m-r-15"}),n.data.dueDate)),p.a.createElement("td",null,p.a.createElement("h6",{className:"text-muted"},O.s.utils.fromWei(n.data.payment.dueAmount)," ETH due")),p.a.createElement("td",null,p.a.createElement("h6",{className:"text-muted"},"Work Status: \xa0",n.data.workCompleted&&p.a.createElement("span",{className:"text-success"},"Completed"),!n.data.workCompleted&&p.a.createElement("span",{className:"text-danger"},"Not Completed"))),p.a.createElement("td",null,p.a.createElement("button",{style:{border:0},onClick:function(){return e.viewDetails(n)},className:"label theme-bg text-white f-12"},"View Details"),p.a.createElement("button",{style:{border:0},onClick:function(){return e.updateWorkStatus(n.id)},className:"label theme-bg text-white f-12"},!n.data.workCompleted&&"Update Progress",n.data.workCompleted&&"Delete Progress"),p.a.createElement("button",{style:{border:0},onClick:function(){return e.dialog.showAlert("Reminder sent!")},className:"label theme-bg2 text-white f-12"},"Remind"),p.a.createElement(k.a,{ref:function(t){e.dialog=t}}))))})),p.a.createElement(E.a,null,p.a.createElement(f.a,null,p.a.createElement(h.a,{md:12,xl:12},p.a.createElement("div",{className:"justify-content-center text-center"},p.a.createElement("img",{className:"rounded-circle",style:{width:"140px"},src:w.a,alt:"user"})),p.a.createElement("div",{className:"mt-3 text-center"},p.a.createElement("h4",{className:"mb-0"},this.state.client.name),p.a.createElement("span",{className:"text-muted d-block mb-2"},this.state.client.email),p.a.createElement("span",{className:"text-muted d-block mb-2"},this.state.client.clientAddr),p.a.createElement("h5",{className:"mb-3"},"Discount: ",this.state.client.discount," %"),p.a.createElement("span",null,p.a.createElement(N.a,{value:this.state.discount,onChange:function(t){return e.setState({discount:t.target.value})}})),p.a.createElement(b.a,{size:"sm",onClick:function(){e.updateDiscount(e.state.discount)}},"Update Discount"))),p.a.createElement(h.a,{md:12,xl:12},p.a.createElement(v.a,{className:"Recent-Users mt-5"},p.a.createElement(v.a.Header,null,p.a.createElement(v.a.Title,{as:"h5"},"Pending Invoices")),p.a.createElement(v.a.Body,{className:"px-0 py-2"},p.a.createElement(y.a,{responsive:!0,hover:!0},p.a.createElement("tbody",null,t))))),p.a.createElement(h.a,{md:12,xl:12},p.a.createElement(v.a,{className:"Recent-Users"},p.a.createElement(v.a.Header,null,p.a.createElement(v.a.Title,{as:"h5"},"Settled Invoices")),p.a.createElement(v.a.Body,{className:"px-0 py-2"},p.a.createElement(y.a,{responsive:!0,hover:!0},p.a.createElement("tbody",null,a))))),!this.state.client.isBlocked&&p.a.createElement(h.a,{md:12,xl:12},p.a.createElement("div",{className:"justify-content-center text-center"},p.a.createElement(b.a,{variant:"danger",onClick:function(){return e.blockClient()}},"Block Client"),p.a.createElement(k.a,{ref:function(t){e.dialog=t}}))),this.state.client.isBlocked&&p.a.createElement(h.a,{md:12,xl:12},p.a.createElement("div",{className:"justify-content-center text-center"},p.a.createElement(b.a,{variant:"primary",onClick:function(){return e.blockClient()}},"Unblock Client"),p.a.createElement(k.a,{ref:function(t){e.dialog=t}})))))}}]),a}(p.a.Component);t.default=C},270:function(e,t,a){"use strict";function n(e){return e&&"object"===typeof e&&"default"in e?e.default:e}var r=a(0),c=n(r),o=n(a(1)),s=n(a(57));function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function d(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,c=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(l){r=!0,c=l}finally{try{n||null==s.return||s.return()}finally{if(r)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return f(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var h=function(e){var t=e.classes,a=e.onChange,n=e.onMouseUpOrTouchEnd,r=e.onTouchEnd,o=e.onMouseUp,s=d(e,["classes","onChange","onMouseUpOrTouchEnd","onTouchEnd","onMouseUp"]);return c.createElement("input",i({type:"range",onChange:function(e){return a(e,e.target.valueAsNumber)},onMouseUp:function(e){n(e),o&&o(e)},onTouchEnd:function(e){n(e),r&&r(e)},className:t},s))};h.propTypes={classes:o.string.isRequired,onChange:o.func.isRequired,onMouseUpOrTouchEnd:o.func.isRequired,onTouchEnd:o.func,onMouseUp:o.func};var b=c.memo(h),v=c.forwardRef((function(e,t){var a=e.size,n=e.disabled,o=void 0!==n&&n,l=e.value,u=e.onChange,f=void 0===u?function(){}:u,h=e.onAfterChange,v=void 0===h?function(){}:h,y=e.min,E=void 0===y?0:y,g=e.max,w=void 0===g?100:g,O=e.step,x=e.variant,k=void 0===x?"primary":x,j=e.inputProps,N=void 0===j?{}:j,C=e.tooltip,S=void 0===C?"auto":C,A=e.tooltipPlacement,P=void 0===A?"bottom":A,D=e.tooltipLabel,T=e.tooltipStyle,_=void 0===T?{}:T,I=e.tooltipProps,U=void 0===I?{}:I,M=e.bsPrefix,R=e.className,W=p(r.useState(),2),B=W[0],q=W[1],H=M||"range-slider",z="auto"===S||"on"===S,J=s(R,H,a&&"".concat(H,"--").concat(a),o&&"disabled",k&&"".concat(H,"--").concat(k)),L=N.onMouseUp,V=N.onTouchEnd,$=d(N,["onMouseUp","onTouchEnd"]),F=r.useCallback((function(e){B!==e.target.value&&v(e,e.target.valueAsNumber),q(e.target.value)}),[B,v]),G=c.createElement(b,m({disabled:o,value:l,min:E,max:w,ref:t,step:O,classes:J,onMouseUpOrTouchEnd:F,onTouchEnd:V,onMouseUp:L,onChange:f},$)),K=s("".concat(H,"__wrap"),a&&"".concat(H,"__wrap--").concat(a)),Q=s("".concat(H,"__tooltip"),z&&"".concat(H,"__tooltip--").concat(S),P&&"".concat(H,"__tooltip--").concat(P),o&&"".concat(H,"__tooltip--disabled")),X=(l-E)/(w-E),Y=100*X,Z=2*(X-.5)*-("sm"===a?8:"lg"===a?12:10);return c.createElement("span",{className:K},G,z&&c.createElement("div",i({className:Q,style:m(m({},_||{}),{},{left:"calc(".concat(Y,"% + ").concat(Z,"px)")})},U),c.createElement("div",{className:"".concat(H,"__tooltip__label")},D?D(l):l),c.createElement("div",{className:"".concat(H,"__tooltip__arrow")})))})),y="undefined"===typeof y?function(){}:y;v.propTypes={value:o.oneOfType([o.number,o.string]),onChange:o.func,onAfterChange:o.func,min:o.number,max:o.number,step:o.number,disabled:o.bool,size:o.oneOf(["sm","lg"]),variant:o.oneOf(["primary","secondary","success","danger","warning","info","dark","light"]),inputProps:o.object,tooltip:o.oneOf(["auto","on","off"]),tooltipPlacement:o.oneOf(["top","bottom"]),tooltipLabel:o.func,tooltipStyle:o.object,tooltipProps:o.object,className:o.string,ref:o.oneOfType([o.func,o.shape({current:o.instanceOf(y)})]),bsPrefix:o.string},e.exports=v}}]);
//# sourceMappingURL=15.537188b5.chunk.js.map